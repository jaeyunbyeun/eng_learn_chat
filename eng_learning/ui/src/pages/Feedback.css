:root {
  --bg: #f8f9fa;
  --card: #ffffff;
  --text: #333;
  --muted: #555;
  --primary: #7caaeb;
  --primary-dark: #5d96dc;
  --shadow: rgba(0, 0, 0, 0.2);
  --chip-excellent: #27ae60;
  --chip-good: #2d9cdb;
  --chip-needs: #f2994a;
  --topic-grammar: #a78bfa;     /* violet */
  --topic-vocabulary: #00b894;  /* green */
  --topic-conversation: #fd79a8;/* pink */
}

* { box-sizing: border-box; }

.feedback-container {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background: var(--bg);
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  padding: 16px;
}

.feedback-card {
  background: var(--card);
  padding: 2rem;
  border-radius: 1.5rem;
  box-shadow: 0 4px 15px var(--shadow);
  width: 100%;
  max-width: 760px;
}

.feedback-header {
  display: flex;
  align-items: center;
  justify-content: space-between; /* 또는 이 줄 없이 아래 margin-left:auto 사용 */
  margin-bottom: 12px;
}

.feedback-card h2 {
  font-size: 1.8rem;
  color: var(--primary);
  margin: 0;
}

.back-button {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--primary);
  padding: 0;
  transition: transform 0.2s, color 0.2s;
}
.back-button:hover {
  transform: scale(1.15);
  color: var(--primary-dark);
}

/* Summary */
.summary {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 12px;
}
.summary-item {
  background: #f2f5ff;
  border-radius: 12px;
  padding: 12px 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.summary-label {
  color: var(--muted);
  font-size: 0.9rem;
}
.summary-value {
  font-size: 1.2rem;
  color: var(--text);
}

/* Tabs */
.tabs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 8px 0 18px;
}
.tab {
  border: 1px solid #e2e8f0;
  background: #fff;
  color: #333;
  padding: 8px 12px;
  border-radius: 999px;
  cursor: pointer;
  font-size: 0.95rem;
  transition: background 0.2s, border-color 0.2s;
}
.tab.active {
  border-color: var(--primary);
  background: #eef5ff;
  color: var(--primary-dark);
}
.tab:hover { background: #f7f9fc; }

/* Section title */
.section-title {
  font-size: 1.1rem;
  color: var(--text);
  margin: 0 0 8px;
}

/* List */
.feedback-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 12px;
}

.feedback-item {
  background: #f9fafb;
  border-radius: 12px;
  padding: 14px;
  border: 1px solid #edf0f4;
}

.item-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 10px;
}

/* Topic badge */
.topic-badge {
  font-weight: 600;
  font-size: 0.9rem;
  padding: 6px 10px;
  border-radius: 999px;
  color: #fff;
}
.topic-grammar { background: var(--topic-grammar); }
.topic-vocabulary { background: var(--topic-vocabulary); }
.topic-conversation { background: var(--topic-conversation); }

/* Level chip */
.level-chip {
  font-size: 0.85rem;
  padding: 6px 10px;
  border-radius: 999px;
  color: #fff;
  white-space: nowrap;
}
.level-excellent { background: var(--chip-excellent); }
.level-good { background: var(--chip-good); }
.level-needs-work { background: var(--chip-needs); }

/* Score bar */
.score-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 6px 0 4px;
}
.score-bar {
  flex: 1;
  height: 10px;
  border-radius: 999px;
  background: #e9eef6;
  overflow: hidden;
}
.score-fill {
  height: 100%;
  background: linear-gradient(90deg, #7caaeb, #5d96dc);
  border-radius: 999px;
  transition: width 0.35s ease;
}
.score-text {
  width: 40px;
  text-align: right;
  font-weight: 600;
  color: var(--text);
}

/* Details */
.feedback-details {
  margin-top: 8px;
}
.details-summary {
  cursor: pointer;
  color: var(--primary-dark);
  font-weight: 600;
  list-style: none;
}
.details-summary::-webkit-details-marker { display: none; }
.feedback-text {
  margin: 8px 0 0;
  color: var(--muted);
  line-height: 1.5;
}

/* Meta */
.meta {
  margin-top: 8px;
  font-size: 0.85rem;
  color: #6b7280;
}

/* Empty */
.empty {
  text-align: center;
  color: var(--muted);
  background: #f3f4f6;
  padding: 20px;
  border-radius: 12px;
}

/* Responsive */
@media (max-width: 480px) {
  .summary { grid-template-columns: 1fr; }
  .score-text { width: auto; min-width: 36px; }
}
/* === Compact Mode === */
.feedback-container { padding: 8px; }

.feedback-card.compact {
  max-width: 520px;         /* 카드 너비 축소 */
  padding: 1rem 1.25rem;    /* 패딩 축소 */
  border-radius: 1rem;
  max-height: 88vh;         /* 화면 넘치면 스크롤 */
  overflow: auto;
}

/* 헤더 & 타이틀 축소 */
.feedback-card.compact .feedback-header { gap: 8px; margin-bottom: .6rem; }
.feedback-card.compact h2 { font-size: 1.4rem; }

/* 요약 박스 축소 */
.feedback-card.compact .summary { gap: 8px; margin-bottom: 8px; }
.feedback-card.compact .summary-item { padding: 8px 10px; }
.feedback-card.compact .summary-label { font-size: .85rem; }
.feedback-card.compact .summary-value { font-size: 1rem; }

/* 탭 축소 */
.feedback-card.compact .tabs { gap: 6px; margin: 6px 0 12px; }
.feedback-card.compact .tab { padding: 6px 10px; font-size: .85rem; }

/* 리스트 여백 축소 */
.feedback-card.compact .feedback-list { gap: 8px; }
.feedback-card.compact .feedback-item { padding: 10px; }

/* 배지/칩 축소 */
.feedback-card.compact .item-head { margin-bottom: 6px; }
.feedback-card.compact .topic-badge,
.feedback-card.compact .level-chip { padding: 4px 8px; font-size: .8rem; }

/* 점수바 축소 */
.feedback-card.compact .score-wrap { gap: 8px; margin: 4px 0; }
.feedback-card.compact .score-bar { height: 8px; }
.feedback-card.compact .score-text { width: 34px; font-size: .9rem; }

/* 디테일/본문/메타 축소 */
.feedback-card.compact .details-summary { font-size: .9rem; }
.feedback-card.compact .feedback-text { font-size: .9rem; }
.feedback-card.compact .meta { font-size: .8rem; }

/* 모바일에서도 더 빽빽하게 */
@media (max-width: 480px) {
  .feedback-card.compact { max-width: 100%; padding: .9rem 1rem; }
}

/* === Date Picker === */
.date-picker {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
  margin: 10px 0 16px;
}

.date-card {
  border: 1px solid #e2e8f0;
  background: #fff;
  padding: 10px 12px;
  border-radius: 12px;
  cursor: pointer;
  transition: transform .15s ease, border-color .2s, background .2s;
  text-align: center;
  font-weight: 600;
  color: var(--text);
}
.date-card:hover { transform: translateY(-1px); background: #f8fafc; }
.date-card.active { border-color: var(--primary); background: #eef5ff; color: var(--primary-dark); }

.date-section-title {
  font-size: 1.05rem;
  color: var(--text);
  margin: 0 0 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-reset {
  margin-left: auto;
  background: none;
  border: none;
  color: var(--primary-dark);
  cursor: pointer;
  font-size: .9rem;
  text-decoration: underline;
}

/* compact일 때 살짝 줄이기 */
.feedback-card.compact .date-card { padding: 8px 10px; border-radius: 10px; }
.feedback-card.compact .date-section-title { font-size: .95rem; }
